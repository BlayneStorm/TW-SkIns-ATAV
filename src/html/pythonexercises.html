<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Python Course</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <script language="javascript" type="text/javascript" src="../shared/header.html"></script> -->
    <link rel="stylesheet" type="text/css" media="screen" href="/coursePageExample.css" />
    <!-- <link rel="stylesheet" type="text/css" href="/styles.css"> -->
    <link rel="stylesheet" type="text/css" media="screen" href="/index_styles.css" />
    <link rel="stylesheet" type="text/css" href="/pythonpage.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

</head>

<body>


        <div class="header">
                <div class="center">
                    <h1>Skillz'
                        <span>o</span>'Skillz</h1>
        
                    <ul class="menu">
                        <li>
                            <a href="index.html">Home</a>
                        </li>
                        <li>
                            <a href="courses">Courses</a>
                        </li>
                        <li>
                            <a href="achievements">My Achivements</a>
                        </li>
                        <li>
                            <a href="myLibrary">My Library</a>
                        </li>
                        <li>
                            <div>
                                <button onclick="document.getElementById('id01').style.display='block'" style="width:auto;">LOGIN</button>
        
                                <div id="id01" class="modal">
        
                                    <form class="modal-content animate" action="/signin" method="POST">
                                        <div class="imgcontainer">
                                            <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
                                            <img src="https://s.ftcdn.net/r/v2013/89bd5a4e8d76a90158624b004ca5f2709f6b3aff/pics/all/categories2013/10031/10034-160x160.jpg"
                                                alt="Avatar" class="avatar">
                                        </div>
        
                                        <div class="container">
                                            <label for="email">
                                                <b>Username</b>
                                            </label>
                                            <input type="text" placeholder="Enter Username" name="email" required>
        
                                            <label for="password">
                                                <b>Password</b>
                                            </label>
                                            <input type="password" placeholder="Enter Password" name="password" required>
        
                                            <button type="submit" class="button1">Login</button>
                                            <label>
                                                <input type="checkbox" checked="checked" name="remember"> Remember me
                                            </label>
                                        </div>
        
                                        <div class="container">
                                            <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
                                            <span class="psw">Forgot
                                                <a href="#">password?</a>
                                            </span>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fa fa-gear fa-2x gear"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="Profile">Profil</a>
                                </li>
                                <li>
                                    <a href="register">Register</a>
                                </li>
                                <li>
                                    <a href="/sign-out">Logout</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                    <div class="dropdown">
                        <!-- <button class="dropbtn">Dropdown</button> -->
                        <div class="container dropbtn" onclick="myFunction(this)">
                            <div class="bar1"></div>
                            <div class="bar2"></div>
                            <div class="bar3"></div>
                        </div>
                        <div class="dropdown-content">
                            <a href="index.html">Home</a>
                            <a href="courses">Courses</a>
                            <a href="achievements">My Achivements</a>
                            <a href="myLibrary">My Library</a>
                            <div>
        
                                <button onclick="document.getElementById('id02').style.display='block'" style="width:auto;">LOGIN</button>
        
                                <div id="id02" class="modal">
        
                                    <form class="modal-content animate" action="/signin" method="POST">
                                        <div class="imgcontainer">
                                            <span onclick="document.getElementById('id02').style.display='none'" class="close" title="Close Modal">&times;</span>
                                            <img src="https://s.ftcdn.net/r/v2013/89bd5a4e8d76a90158624b004ca5f2709f6b3aff/pics/all/categories2013/10031/10034-160x160.jpg"
                                                alt="Avatar" class="avatar">
                                        </div>
        
                                        <div class="container">
                                            <label for="email">
                                                <b>Username</b>
                                            </label>
                                            <input type="text" placeholder="Enter Username" name="email" required>
        
                                            <label for="password">
                                                <b>Password</b>
                                            </label>
                                            <input type="password" placeholder="Enter Password" name="password" required>
        
                                            <button type="submit" class="button1">Login</button>
                                            <label>
                                                <input type="checkbox" checked="checked" name="remember"> Remember me
                                            </label>
                                        </div>
        
                                        <div class="container">
                                            <button type="button" onclick="document.getElementById('id02').style.display='none'" class="cancelbtn">Cancel</button>
                                            <span class="psw">Forgot
                                                <a href="#">password?</a>
                                            </span>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <button class="accordion">Settings</button>
                            <div class="panel">
                                <a href="Profile">Profil</a>
        
                                <a href="/sign-out">Logout</a>
                            </div>
                            <script>
                                var acc = document.getElementsByClassName("accordion");
                                var i;
        
                                for (i = 0; i < acc.length; i++) {
                                    acc[i].addEventListener("click", function () {
                                        this.classList.toggle("active");
                                        var panel = this.nextElementSibling;
                                        if (panel.style.display === "block") {
                                            panel.style.display = "none";
                                        } else {
                                            panel.style.display = "block";
                                        }
                                    });
                                }
                            </script>
                            </button>
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>
            </div>
        
            <script type="text/javascript" src="/header.js"></script>

    <!-- TOT CE AM AVUT PANA AICI REPREZINTA HEADERUL -->

    <!-- ~~~~~~~~~~~~~~~~~~~ BODY ~~~~~~~~~~~~~~~~~~~~~~-->
    <!-- Body-ul din pagina de Library-->



    <br><br><br><br><br><br><br><br><br><br><br><br>
    <div class="course-body">
        <!-- <div> -->
                <!-- <img src="/src/assets/images/python.png"> -->
                <img id="pythonLogo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0a/Python.svg/600px-Python.svg.png"
                alt="Python Logo" height="20%" width="20%" >
                <!-- IMAGINEA CU PITONU -->
        <!-- </div> -->
        <div class="courseTitle">
            <h1>Python exercises</h1>
        </div>
        <!-- <img class="imagineRockstar" src="/POZA CU PITON"/> -->
        <br/>
        <br/>

        <div id="exercisesContainer">

        </div>
        <br><br><br>
        <div id ="displayedExercise">

        </div>
        <br>
        <div id="submitSolutionContainer">

        </div>

        <br/>
        <br/>
        <a href="/python"><button class="buton-exercitiu">DOCUMENTATION</button></a>
        <br/>
        <br/>
        <br/>
        <br/>





    </div>



    <!-- end of Body -->

    <footer class="container-footer">
        <!--           
                    <h4>Copyright 2018, ATAV
                        <br>All Rights Reserved</h4> -->

        <div class="flex-footer-container">
            <!--lefct center right footers -->
            <div class="lcr-footer-element" id="leftFooter">
                <p>Phone number: 0747 815 389</p>
                <p>Email: contact@skin.com </p>
                <p>Fax: 0232 264 385</p>
                <div class="socialIcons">
                    <a href="https://www.facebook.com/">
                        <i class="fa fa-facebook-square fa-2x" style="color:royalblue;"></i>
                    </a>
                    <a href="https://www.instagram.com/">
                        <i class="fa fa-instagram fa-2x" style="color:salmon;"></i>
                    </a>
                    <a href="https://www.youtube.com/">
                        <i class="fa fa-youtube fa-2x" style="color:red;"></i>
                    </a>
                </div>
            </div>



            <div class="lcr-footer-element" id="centralFooter">
                <ul class="socialMedia">
                    <li style="display: block">
                        <h4>Copyright 2018, ATAV
                            <br>All Rights Reserved</h4>

                    </li>

                    <li>
                        <!-- <div class="socialIcons">
                            <a href="https://www.facebook.com/">
                                <i class="fa fa-facebook-square fa-2x" style="color:royalblue;"></i>
                            </a>
                            <a href="https://www.instagram.com/">
                                <i class="fa fa-instagram fa-2x" style="color:salmon;"></i>
                            </a>
                            <a href="https://www.youtube.com/">
                                <i class="fa fa-youtube fa-2x" style="color:red;"></i>
                            </a>
                            </div> -->
                    </li>
                </ul>
            </div>

            <div class="lcr-footer-element" id="rightFooter">
                <p>Address:</p>
                <div id="map"></div>
                <script>
                    function initMap() {
                        var uluru = { lat: 47.175240, lng: 27.575136 };
                        var map = new google.maps.Map(document.getElementById('map'), {
                            zoom: 15,
                            center: uluru
                        });
                        var marker = new google.maps.Marker({
                            position: uluru,
                            map: map
                        });
                    }
                </script>
                <!-- <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2712.176928991033!2d27.572722415283028!3d47.17397237915843!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x40cafb6227e846bd%3A0x193e4b6864504e2c!2sFacultatea+de+Informatic%C4%83!5e0!3m2!1sro!2sro!4v1521408940987" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe> -->
                <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDslzbScv42DBB1SKmpdIM9A39VMRYuz8s&callback=initMap">
                </script>

            </div>
        </div>



    </footer>

    <!-- <script src="exercises.js"></script> -->
    <script>


        function displayExercise(exerciseToDisplay) {
            const URL = 'https://localhost:8050/python/getExercise/'+exerciseToDisplay;
            const TIME = 5000;

            var displayedExerciseContainer = document.getElementById('displayedExercise');

            while (displayedExerciseContainer.firstChild) {
                displayedExerciseContainer.removeChild(displayedExerciseContainer.firstChild);
            }

        try { // trying to instantiate a XMLHttpRequest object
            var xhr = new XMLHttpRequest();
        } catch (e) {
            exercisesContainer.innerHTML = 'XMLHttpRequest cannot be instantiated: ' + e.message;
        } finally {
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {   // data arrived
                    if (xhr.status === 200) { // response Ok from Web service
                        //    callback(xhr.responseText.trim());
                        
                        var jsonResponse = JSON.parse(xhr.responseText);
                        var exerciseToBeDisplayed = jsonResponse.data;
                        
                        // exercises.forEach(exercise => {
                        //     console.log(exercise);
                        //     var button = document.createElement('BUTTON');
                        //     var nrExercitiu = document.createTextNode('Exercitiul '+exercise.nrExercitiu); 
                        //     button.className = 'buton-exercitiu';
                        //     button.appendChild(nrExercitiu);
                        //     exercisesContainer.appendChild(button);
                        // });

                        var enunt = document.createElement('p');
                        var continutEnunt = document.createTextNode(exerciseToBeDisplayed.enunt);
                        enunt.appendChild(continutEnunt);
                        displayedExerciseContainer.appendChild(enunt);

                        
                        // var exercise = JSON.parse(exercises[0]);
                        // exercisesContainer.innerHTML = jsonResponse.content[0];
                        // var json = JSON.parse(responseArray[0]);
                        // exercisesContainer.innerHTML = exercises[0].enunt;
                    }
                }
            };
            xhr.open("GET", URL, true); // opening connection
            xhr.timeout = TIME;         // setting the response time
            xhr.send();             // sending the HTTP request (no data is provided)
        }


        };

        /** end of displayExercise function **/

        function firstButtonPush(){
            var button = document.getElementById('buton-exercitiu-1');
            
                button.indexNumber = 1;   
                button.onclick = function() {
                    // displayExercise(buttons[i].indexNumber);
                    console.log(1);
                    hideIframe();
                    displayExercise(1);
                    document.getElementById('submitSolutionContainer').style = 'display:block';
                    document.getElementById('uploadedEx').value = '1';
                };
        };

        function secondButtonPush(){
            var button = document.getElementById('buton-exercitiu-2');
            
                button.indexNumber = 2;   
                button.onclick = function() {
                    // displayExercise(buttons[i].indexNumber);
                    console.log(2);
                    hideIframe();
                    displayExercise(2);
                    document.getElementById('submitSolutionContainer').style = 'display:block';
                    document.getElementById('uploadedEx').value = '2';
                };
        };

         function thirdButtonPush(){
            var button = document.getElementById('buton-exercitiu-3');
            
                button.indexNumber = 3;   
                button.onclick = function() {
                    // displayExercise(buttons[i].indexNumber);
                    console.log(3);
                    hideIframe();
                    displayExercise(3);
                    document.getElementById('submitSolutionContainer').style = 'display:block';
                    document.getElementById('uploadedEx').value = '3';
                };
        };

        function fourthButtonPush(){
            var button = document.getElementById('buton-exercitiu-4');
            
                button.indexNumber = 4;   
                button.onclick = function() {
                    // displayExercise(buttons[i].indexNumber);
                    console.log(4);
                    hideIframe();
                    displayExercise(4);
                    document.getElementById('submitSolutionContainer').style = 'display:block';
                    document.getElementById('uploadedEx').value = '4';
                };
        };

         function fifthButtonPush(){
            var button = document.getElementById('buton-exercitiu-5');
            
                button.indexNumber = 5;   
                button.onclick = function() {
                    // displayExercise(buttons[i].indexNumber);
                    hideIframe();
                    console.log(5);
                    displayExercise(5);
                    document.getElementById('submitSolutionContainer').style = 'display:block';
                    document.getElementById('uploadedEx').value = '5';
                };
        };

        function createSubmitSolutionContainer() {

            var container = document.getElementById('submitSolutionContainer');

            var submitForm = document.createElement('form');
            submitForm.action = '/python/fileupload';
            submitForm.method = 'post';
            submitForm.enctype = 'multipart/form-data';
            submitForm.target = 'formDestination';
            submitForm.id = 'uploadSolutionForm';
            
            // var inputText = document.createElement('input');
            // inputText.type = 'text';
            // inputText.name = 'textFromForm';

            // var uploadedEx = document.createElement('p');
            // uploadedEx.innerHTML = '1'; 
            // uploadedEx.name = 'uploadedEx';
            var uploadedEx = document.createElement('input');
            uploadedEx.value = 'Nr Exercitiu';
            uploadedEx.type= 'text';
            uploadedEx.name = 'uploadedEx';
            uploadedEx.id = 'uploadedEx';
            uploadedEx.style = 'display:none';

            var inputButton = document.createElement('input');
            inputButton.id = 'filetoupload';
            inputButton.classList.add('submit-button');
            inputButton.type = 'file';
            inputButton.name = 'filetoupload';

            // var label = document.createElement('label');
            // label.htmlFor = 'filetoupload';
            // label.className = 'custom-file-upload';
            // label.textContent = 'Custom Upload';

            var submitButton = document.createElement('input');
            submitButton.classList.add('submit-button');
            submitButton.type = 'submit';

            // submitForm.appendChild(inputText);
            submitForm.appendChild(uploadedEx);
            submitForm.appendChild(inputButton);
            submitForm.appendChild(submitButton);


            container.appendChild(submitForm);

            // <iframe name="formDestination"></iframe>
            var br1 = document.createElement('br');
            var br2 = document.createElement('br');

            var iframe = document.createElement('iframe');
            iframe.name = 'formDestination';
            iframe.id = 'solutionOutput';
            iframe.style = 'display:none;';

            container.appendChild(br1);
            container.appendChild(br2);
            container.appendChild(iframe);

            container.style = 'display:none';
            
        };

function hideIframe() {
    var iframe = document.getElementById('solutionOutput');
    iframe.style = 'display:none';
    console.log('Am ascuns iframeul');
};

function addEventWhenSubmitingForm() {
    var form = document.getElementById('uploadSolutionForm');

    form.onsubmit = function () {
        var iframe = document.getElementById('solutionOutput');
        // iframe.style = 'display:block';
        iframe.setAttribute("style","display: inline-block;align:middle;width:60%;");
        console.log('Am afisat iframeul');
    };

    var iframe = document.getElementById('solutionOutput');
    iframe.style = 'display:none';

    console.log('Am adaugat event la submt');
};

window.onload = function(){
    firstButtonPush();
    secondButtonPush();
    thirdButtonPush();
    fourthButtonPush();
    fifthButtonPush();
    createSubmitSolutionContainer();
    addEventWhenSubmitingForm();

//   document.getElementById("button1").click();   
};    




        var exercisesContainer = document.getElementById("exercisesContainer");

        const URL = 'https://localhost:8050/python/getExercises';
        const TIME = 5000;

        try { // trying to instantiate a XMLHttpRequest object
            var xhr = new XMLHttpRequest();
        } catch (e) {
            exercisesContainer.innerHTML = 'XMLHttpRequest cannot be instantiated: ' + e.message;
        } finally {
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {   // data arrived
                    if (xhr.status === 200) { // response Ok from Web service
                        //    callback(xhr.responseText.trim());
                        
                        var jsonResponse = JSON.parse(xhr.responseText);
                        var exercises = jsonResponse.content;
                        var indexExercitiu = 1;
                        exercises.forEach(exercise => {
                            console.log(exercise);
                            var button = document.createElement('BUTTON');
                            var nrExercitiu = document.createTextNode('Exercitiul '+exercise.nrExercitiu); 
                            button.className = 'buton-exercitiu';
                            button.id = 'buton-exercitiu-' + exercise.nrExercitiu;
                            button.appendChild(nrExercitiu);
                            // button.onclick = 'displayExercise(index)';
                            // if (button.addEventListener)
                            //     button.addEventListener("click", displayExercise(index), false);
                            // else if (button.attachEvent)
                            //     button.attachEvent('onclick', displayExercise(index));
                            nrExercitiu++;
                            exercisesContainer.appendChild(button);
                        });
                        
                        // var exercise = JSON.parse(exercises[0]);
                        // exercisesContainer.innerHTML = jsonResponse.content[0];
                        // var json = JSON.parse(responseArray[0]);
                        // exercisesContainer.innerHTML = exercises[0].enunt;
                    }
                }
            };
            xhr.open("GET", URL, true); // opening connection
            xhr.timeout = TIME;         // setting the response time
            xhr.send();             // sending the HTTP request (no data is provided)
        }


    </script>
</body>
<!-- <footer>
    <script language="javascript" type="text/javascript" src="../shared/footer.html"></script>
</footer> -->

</html>